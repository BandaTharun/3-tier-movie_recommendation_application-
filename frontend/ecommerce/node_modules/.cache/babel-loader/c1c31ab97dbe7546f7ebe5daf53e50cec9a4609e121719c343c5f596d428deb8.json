{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Card,ListGroup,Form,Alert,Button}from\"react-bootstrap\";import axios from'axios';// Import axios for HTTP requests\nimport{Link}from'react-router-dom';import Rating from\"./Rating_symbol\";// Assuming Rating component is imported\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Myratingscreen(_ref){let{product,rating}=_ref;const[error,setError]=useState(\"\");const[successMessage,setSuccessMessage]=useState(\"\");const[newRating,setNewRating]=useState(rating);// Initialize newRating state with rating prop\nconst handleDelete=async()=>{try{const accessToken=localStorage.getItem(\"accessToken\");const response=await axios.delete(\"/rating/\",{data:{movie:product.title},// Specify the request body with the movie title\nheaders:{Authorization:\"Bearer \".concat(accessToken)}});const{message}=response.data;if(response.status===200){setSuccessMessage(message);setError(\"\");}else{setError(\"Error deleting. Please try again later.\");setSuccessMessage(\"\");}}catch(error){console.error(\"Error deleting movie:\",error);setError(\"An error occurred. Please try again later.\");setSuccessMessage(\"\");}};const submitRating=async()=>{try{const accessToken=localStorage.getItem(\"accessToken\");const response=await axios.put(\"/rating/\",{movie:product.title,rating:newRating// Use newRating state instead of rating prop\n},{headers:{Authorization:\"Bearer \".concat(accessToken)}});const{message}=response.data;if(response.status===200){setSuccessMessage(message);setError(\"\");}else{setError(\"Error updating rating. Please try again later.\");setSuccessMessage(\"\");}}catch(error){console.error(\"Error updating rating:\",error);setError(\"An error occurred. Please try again later.\");setSuccessMessage(\"\");}};useEffect(()=>{// Reload the page when successMessage changes\nif(successMessage){window.location.reload();}},[successMessage]);return/*#__PURE__*/_jsxs(Card,{className:\"my-3 p-3 rounded\",children:[successMessage&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",children:successMessage}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),/*#__PURE__*/_jsx(Link,{to:\"/movies/\".concat(product.id,\"/\"),children:/*#__PURE__*/_jsx(Card.Img,{src:product.image_url,style:{height:\"400px\"}// Set the height directly in style attribute\n,className:\"card-image\"})}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Link,{to:\"/movies/\".concat(product.id,\"/\"),className:\"text-dark\",children:/*#__PURE__*/_jsx(Card.Title,{as:\"h3\",children:/*#__PURE__*/_jsx(Link,{to:\"/movies/\".concat(product.id,\"/\"),className:\"text-dark\",children:product.title})})}),/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",label:\" Click on the Checkbox To Delete the movie from MyRatings\",onChange:handleDelete// Pass handleDelete function as onChange callback\n,style:{color:'blue'}})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Rating,{value:newRating,onChange:value=>setNewRating(value)})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{onClick:submitRating,className:\"btn-block\",disabled:newRating===rating,children:\"Update Rating\"})})]})]})]});}export default Myratingscreen;","map":{"version":3,"names":["React","useState","useEffect","Card","ListGroup","Form","Alert","Button","axios","Link","Rating","jsx","_jsx","jsxs","_jsxs","Myratingscreen","_ref","product","rating","error","setError","successMessage","setSuccessMessage","newRating","setNewRating","handleDelete","accessToken","localStorage","getItem","response","delete","data","movie","title","headers","Authorization","concat","message","status","console","submitRating","put","window","location","reload","className","children","variant","to","id","Img","src","image_url","style","height","Body","Title","as","Item","Check","type","label","onChange","color","value","onClick","disabled"],"sources":["/app/src/components/myratingscreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Card, ListGroup, Form, Alert, Button } from \"react-bootstrap\";\nimport axios from 'axios'; // Import axios for HTTP requests\nimport { Link } from 'react-router-dom';\nimport Rating from \"./Rating_symbol\"; // Assuming Rating component is imported\n\nfunction Myratingscreen({ product, rating }) {\n    const [error, setError] = useState(\"\");\n    const [successMessage, setSuccessMessage] = useState(\"\");\n    const [newRating, setNewRating] = useState(rating); // Initialize newRating state with rating prop\n\n    const handleDelete = async () => {\n        try {\n            const accessToken = localStorage.getItem(\"accessToken\");\n\n            const response = await axios.delete(\n                `/rating/`,\n                {\n                    data: { movie: product.title }, // Specify the request body with the movie title\n                    headers: {\n                        Authorization: `Bearer ${accessToken}`,\n                    },\n                }\n            );\n\n            const { message } = response.data;\n\n            if (response.status === 200) {\n                setSuccessMessage(message);\n                setError(\"\");\n            } else {\n                setError(\"Error deleting. Please try again later.\");\n                setSuccessMessage(\"\");\n            }\n        } catch (error) {\n            console.error(\"Error deleting movie:\", error);\n            setError(\"An error occurred. Please try again later.\");\n            setSuccessMessage(\"\");\n        }\n    };\n\n    const submitRating = async () => {\n        try {\n            const accessToken = localStorage.getItem(\"accessToken\");\n            const response = await axios.put(\n                `/rating/`,\n                {\n                    movie: product.title,\n                    rating: newRating, // Use newRating state instead of rating prop\n                },\n                {\n                    headers: {\n                        Authorization: `Bearer ${accessToken}`,\n                    },\n                }\n            );\n\n            const { message } = response.data;\n\n            if (response.status === 200) {\n                setSuccessMessage(message);\n                setError(\"\");\n            } else {\n                setError(\"Error updating rating. Please try again later.\");\n                setSuccessMessage(\"\");\n            }\n        } catch (error) {\n            console.error(\"Error updating rating:\", error);\n            setError(\"An error occurred. Please try again later.\");\n            setSuccessMessage(\"\");\n        }\n    };\n\n    useEffect(() => {\n        // Reload the page when successMessage changes\n        if (successMessage) {\n            window.location.reload();\n        }\n    }, [successMessage]);\n\n    return (\n        <Card className='my-3 p-3 rounded'>\n            {successMessage && <Alert variant=\"success\">{successMessage}</Alert>}\n            {error && <Alert variant=\"danger\">{error}</Alert>}\n            <Link to={`/movies/${product.id}/`}>\n            <Card.Img\n            src={product.image_url}\n            style={{ height: \"400px\" }} // Set the height directly in style attribute\n            className=\"card-image\" />\n            </Link>\n            <Card.Body>\n                <Link to={`/movies/${product.id}/`} className='text-dark'>\n                    <Card.Title as=\"h3\">\n                        <Link to={`/movies/${product.id}/`} className='text-dark'>\n                            {product.title}\n                        </Link>\n                    </Card.Title>\n                </Link>\n                <ListGroup variant=\"flush\">\n                    <ListGroup.Item>\n                        <Form.Check\n                            type=\"checkbox\"\n                            label=\" Click on the Checkbox To Delete the movie from MyRatings\"\n                            onChange={handleDelete} // Pass handleDelete function as onChange callback\n                            style={{ color: 'blue' }}\n                        />\n                    </ListGroup.Item>\n                    <ListGroup.Item>\n                        <Rating value={newRating} onChange={(value) => setNewRating(value)} />\n                    </ListGroup.Item>\n                    <ListGroup.Item>\n                        <Button onClick={submitRating} className=\"btn-block\" disabled={newRating === rating}>\n                            Update Rating\n                        </Button>\n                    </ListGroup.Item>\n                </ListGroup>\n            </Card.Body>\n        </Card>\n    );\n}\n\nexport default Myratingscreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}