{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{LinkContainer}from\"react-router-bootstrap\";import{Container,Nav,Col,Button,Modal,Form,Alert}from\"react-bootstrap\";import axios from\"axios\";// Import axios\nimport fetchuserdata from\"./fetchusersData\";import Footer from\"./Footer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function MyList(){const[USERSDATA,setUSERSDATA]=useState([]);// State to store user data\nconst[successToken,setSuccessToken]=useState(\"\");const[accessToken,setAccessToken]=useState(localStorage.getItem(\"accessToken\"));const[submitMessage,setSubmitMessage]=useState({variant:\"success\",message:\"\"});const Users=fetchuserdata();const deleteuser=username=>{// Get accessToken directly from state\nconst accessToken=localStorage.getItem(\"accessToken\");axios.delete('/adminmanage_users/',{data:{username:username},// Specify the request body with the username\nheaders:{Authorization:\"Bearer \".concat(accessToken),\"Content-Type\":\"application/json\"}}).then(response=>{// Move screen up from down\nwindow.scrollTo({top:0,behavior:'smooth'});// Reload page after 2 seconds\nsetTimeout(()=>{window.location.reload();},1000);// Handle success\nsetSubmitMessage({variant:\"success\",message:\"User deleted successfully.\"});console.log('User deleted successfully:',response.data);}).catch(error=>{// Move screen up from down\nwindow.scrollTo({top:0,behavior:'smooth'});// Reload page after 2 seconds\nsetTimeout(()=>{window.location.reload();},1000);// Handle error\nsetSubmitMessage({variant:\"danger\",message:\"Error deleting user. Please try again later.\"});console.error('Error deleting user:',error);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-5\",children:[accessToken?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Manage Users\"}),submitMessage.message&&/*#__PURE__*/_jsx(Alert,{variant:submitMessage.variant,children:submitMessage.message}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-borderless table-dark\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"id\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"username\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"email\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"IS_STAFF\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"IS_SUPERUSER\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"ACTION\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:Users.map((user,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:user.id}),/*#__PURE__*/_jsx(\"td\",{children:user.username}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.is_staff?\"Yes\":\"No\"}),/*#__PURE__*/_jsx(\"td\",{children:user.is_superuser?\"Yes\":\"No\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{variant:\"outline-danger\",onClick:()=>deleteuser(user.username),children:\"DELETE USER\"})})]},user.id))})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"You are not authorized to use. You have to be a registered Admin and logged-in.\"}),/*#__PURE__*/_jsx(LinkContainer,{to:\"/Admin\",children:/*#__PURE__*/_jsx(Nav.Link,{className:\"navbar-link active\",children:/*#__PURE__*/_jsx(\"h5\",{children:\" Click Here To Login \"})})})]}),/*#__PURE__*/_jsx(Footer,{})]});}export default MyList;","map":{"version":3,"names":["React","useEffect","useState","LinkContainer","Container","Nav","Col","Button","Modal","Form","Alert","axios","fetchuserdata","Footer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MyList","USERSDATA","setUSERSDATA","successToken","setSuccessToken","accessToken","setAccessToken","localStorage","getItem","submitMessage","setSubmitMessage","variant","message","Users","deleteuser","username","delete","data","headers","Authorization","concat","then","response","window","scrollTo","top","behavior","setTimeout","location","reload","console","log","catch","error","className","children","scope","map","user","index","id","email","is_staff","is_superuser","onClick","to","Link"],"sources":["/app/src/components/Manageusers.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport { Container, Nav, Col, Button, Modal, Form, Alert } from \"react-bootstrap\";\nimport axios from \"axios\"; // Import axios\nimport fetchuserdata from \"./fetchusersData\";\nimport Footer from \"./Footer\";\n\nfunction MyList() {\n  const [USERSDATA, setUSERSDATA] = useState([]); // State to store user data\n  const [successToken, setSuccessToken] = useState(\"\");\n  const [accessToken, setAccessToken] = useState(localStorage.getItem(\"accessToken\"));\n  const [submitMessage, setSubmitMessage] = useState({ variant: \"success\", message: \"\" });\n  const Users = fetchuserdata();\n\n  const deleteuser = (username) => {\n    // Get accessToken directly from state\n    const accessToken = localStorage.getItem(\"accessToken\");\n    axios.delete('/adminmanage_users/', {\n      data: { username: username }, // Specify the request body with the username\n      headers: {\n        Authorization: `Bearer ${accessToken}`,\n        \"Content-Type\": \"application/json\",\n      },\n    })\n\n      .then(response => {\n        // Move screen up from down\n        window.scrollTo({ top: 0, behavior: 'smooth' });\n\n        // Reload page after 2 seconds\n        setTimeout(() => {\n          window.location.reload();\n        }, 1000);\n\n        // Handle success\n        setSubmitMessage({\n          variant: \"success\",\n          message: \"User deleted successfully.\"\n        });\n\n        console.log('User deleted successfully:', response.data);\n      })\n      .catch(error => {\n        // Move screen up from down\n        window.scrollTo({ top: 0, behavior: 'smooth' });\n\n        // Reload page after 2 seconds\n        setTimeout(() => {\n          window.location.reload();\n        }, 1000);\n\n        // Handle error\n        setSubmitMessage({\n          variant: \"danger\",\n          message: \"Error deleting user. Please try again later.\"\n        });\n\n        console.error('Error deleting user:', error);\n      });\n  };\n\n  return (\n    <div className=\"text-center mt-5\">\n      {accessToken ? (\n        <div>\n          <h2>Manage Users</h2>\n\n          {submitMessage.message && (\n            <Alert variant={submitMessage.variant}>\n              {submitMessage.message}\n            </Alert>\n          )}\n\n          <table className=\"table table-borderless table-dark\">\n            <thead>\n              <tr>\n                <th scope=\"col\">#</th>\n                <th scope=\"col\">id</th>\n                <th scope=\"col\">username</th>\n                <th scope=\"col\">email</th>\n                <th scope=\"col\">IS_STAFF</th>\n                <th scope=\"col\">IS_SUPERUSER</th>\n                <th scope=\"col\">ACTION</th>\n              </tr>\n            </thead>\n            <tbody>\n              {Users.map((user, index) => (\n                <tr key={user.id}>\n                  <th scope=\"row\">{index + 1}</th>\n                  <td>{user.id}</td>\n                  <td>{user.username}</td>\n                  <td>{user.email}</td>\n                  <td>{user.is_staff ? \"Yes\" : \"No\"}</td>\n                  <td>{user.is_superuser ? \"Yes\" : \"No\"}</td>\n                  <td>\n                    {/* Pass the username to deleteuser */}\n                    <Button variant=\"outline-danger\" onClick={() => deleteuser(user.username)}>DELETE USER</Button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      ) : (\n        <>\n          <h2>You are not authorized to use. You have to be a registered Admin and logged-in.</h2>\n          <LinkContainer to=\"/Admin\">\n            <Nav.Link className=\"navbar-link active\">\n              <h5> Click Here To Login </h5>\n            </Nav.Link>\n          </LinkContainer>\n        </>\n      )}\n      <Footer />\n    </div>\n  );\n}\n\nexport default MyList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}