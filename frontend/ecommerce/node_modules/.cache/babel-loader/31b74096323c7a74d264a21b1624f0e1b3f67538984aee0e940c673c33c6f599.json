{"ast":null,"code":"import axios from'axios';import React,{useEffect,useState}from\"react\";import{LinkContainer}from\"react-router-bootstrap\";import{Nav}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function LoginScreen(){const[formData,setFormData]=useState({username:'',password:''});const[error,setError]=useState('');const[successMessage,setSuccessMessage]=useState('');const[successToken,setSuccessToken]=useState(\"\");const handleChange=e=>{const{name,value}=e.target;setFormData(prevData=>({...prevData,[name]:value}));};const handleSubmit=async e=>{e.preventDefault();try{const response=await axios.post('/login/',formData);const{data}=response;// Assuming the server returns tokens in data\nif(data&&data.access&&data.refresh){// Store tokens in localStorage\nlocalStorage.setItem('accessToken',data.access);localStorage.setItem('refreshToken',data.refresh);// Set success message\nsetSuccessMessage('Login successful!');// Reset error message\nsetError('');// Set success token value\nsetSuccessToken(data.access);// Redirect or do any action needed after successful login\n}}catch(error){setError('Invalid username or password');}};useEffect(()=>{const accessToken=localStorage.getItem(\"accessToken\");if(accessToken){// Set the success token value\nsetSuccessToken(accessToken);}else{// Display message to the user if not logged in\nconsole.log(\"You haven't been logged in.\");}},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-5\",children:successToken?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"You have Sucessfully logged in. You can start using.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Thank you for using Movie-Recommendation.\"}),/*#__PURE__*/_jsx(LinkContainer,{to:\"/\",children:/*#__PURE__*/_jsxs(Nav.Link,{className:\"navbar-link active\",children:[\"Home \",/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-house\"})]})})]}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"section\",{className:\"vh-100\",style:{backgroundColor:'#eee'},children:/*#__PURE__*/_jsx(\"div\",{className:\"container h-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row d-flex justify-content-center align-items-center h-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-12 col-xl-11\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card text-black\",style:{borderRadius:'25px'},children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-md-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row justify-content-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-10 col-lg-6 col-xl-5 order-2 order-lg-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-center h1 fw-bold mb-5 mx-1 mx-md-4 mt-4\",children:\"Login\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),successMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success\",children:successMessage}),/*#__PURE__*/_jsxs(\"form\",{className:\"mx-1 mx-md-4\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row align-items-center mb-4\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user fa-lg me-3 fa-fw\"}),/*#__PURE__*/_jsxs(\"div\",{\"data-mdb-input-init\":true,className:\"form-outline flex-fill mb-0\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"form3Example1c\",className:\"form-control\",name:\"username\",value:formData.username,onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",htmlFor:\"form3Example1c\",children:\"User Name\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row align-items-center mb-4\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-lock fa-lg me-3 fa-fw\"}),/*#__PURE__*/_jsxs(\"div\",{\"data-mdb-input-init\":true,className:\"form-outline flex-fill mb-0\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"form3Example4c\",className:\"form-control\",name:\"password\",value:formData.password,onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",htmlFor:\"form3Example4c\",children:\"Password\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center mx-4 mb-3 mb-lg-4\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",\"data-mdb-button-init\":true,\"data-mdb-ripple-init\":true,className:\"btn btn-primary btn-lg\",children:\"Login\"})})]}),/*#__PURE__*/_jsx(LinkContainer,{to:\"/signup\",children:/*#__PURE__*/_jsxs(Nav.Link,{className:\"navbar-link active\",children:[\" \",/*#__PURE__*/_jsx(\"h5\",{children:\"If You are a New User click on here\"}),\" \"]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-10 col-lg-6 col-xl-7 d-flex align-items-center order-1 order-lg-2\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-registration/draw1.webp\",className:\"img-fluid\",alt:\"Sample image\"})})]})})})})})})})})});}export default LoginScreen;","map":{"version":3,"names":["axios","React","useEffect","useState","LinkContainer","Nav","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LoginScreen","formData","setFormData","username","password","error","setError","successMessage","setSuccessMessage","successToken","setSuccessToken","handleChange","e","name","value","target","prevData","handleSubmit","preventDefault","response","post","data","access","refresh","localStorage","setItem","accessToken","getItem","console","log","className","children","to","Link","style","backgroundColor","borderRadius","onSubmit","type","id","onChange","htmlFor","src","alt"],"sources":["/app/src/components/screens/LoginScreen.js"],"sourcesContent":["import axios from 'axios';\nimport React, { useEffect, useState } from \"react\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport { Nav } from \"react-bootstrap\";\n\nfunction LoginScreen() {\n  const [formData, setFormData] = useState({\n    username: '',\n    password: '',\n  });\n\n  const [error, setError] = useState('');\n  const [successMessage, setSuccessMessage] = useState('');\n  const [successToken, setSuccessToken] = useState(\"\");\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prevData) => ({\n      ...prevData,\n      [name]: value,\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const response = await axios.post('/login/', formData);\n      const { data } = response;\n      // Assuming the server returns tokens in data\n      if (data && data.access && data.refresh) {\n        // Store tokens in localStorage\n        localStorage.setItem('accessToken', data.access);\n        localStorage.setItem('refreshToken', data.refresh);\n        // Set success message\n        setSuccessMessage('Login successful!');\n        // Reset error message\n        setError('');\n        // Set success token value\n        setSuccessToken(data.access);\n        // Redirect or do any action needed after successful login\n      }\n    } catch (error) {\n      setError('Invalid username or password');\n    }\n  };\n\n  useEffect(() => {\n    const accessToken = localStorage.getItem(\"accessToken\");\n\n    if (accessToken) {\n      // Set the success token value\n      setSuccessToken(accessToken);\n    } else {\n      // Display message to the user if not logged in\n      console.log(\"You haven't been logged in.\");\n    }\n  }, []);\n\n  return (\n    <div className=\"text-center mt-5\">\n      {successToken ? (\n        <>\n          <h2>You have Sucessfully logged in. You can start using.</h2>\n          <p>Thank you for using Movie-Recommendation.</p>\n          <LinkContainer to=\"/\">\n            <Nav.Link className=\"navbar-link active\">Home <i className=\"fa-solid fa-house\"></i></Nav.Link>\n          </LinkContainer>\n        </>\n      ) : (\n        <>\n          <section className=\"vh-100\" style={{ backgroundColor: '#eee' }}>\n            <div className=\"container h-100\">\n              <div className=\"row d-flex justify-content-center align-items-center h-100\">\n                <div className=\"col-lg-12 col-xl-11\">\n                  <div className=\"card text-black\" style={{ borderRadius: '25px' }}>\n                    <div className=\"card-body p-md-5\">\n                      <div className=\"row justify-content-center\">\n                        <div className=\"col-md-10 col-lg-6 col-xl-5 order-2 order-lg-1\">\n                          <p className=\"text-center h1 fw-bold mb-5 mx-1 mx-md-4 mt-4\">Login</p>\n                          {error && <div className=\"alert alert-danger\">{error}</div>}\n                          {successMessage && <div className=\"alert alert-success\">{successMessage}</div>}\n                          <form className=\"mx-1 mx-md-4\" onSubmit={handleSubmit}>\n                            <div className=\"d-flex flex-row align-items-center mb-4\">\n                              <i className=\"fas fa-user fa-lg me-3 fa-fw\"></i>\n                              <div data-mdb-input-init className=\"form-outline flex-fill mb-0\">\n                                <input\n                                  type=\"text\"\n                                  id=\"form3Example1c\"\n                                  className=\"form-control\"\n                                  name=\"username\"\n                                  value={formData.username}\n                                  onChange={handleChange}\n                                />\n                                <label className=\"form-label\" htmlFor=\"form3Example1c\">User Name</label>\n                              </div>\n                            </div>\n                            <div className=\"d-flex flex-row align-items-center mb-4\">\n                              <i className=\"fas fa-lock fa-lg me-3 fa-fw\"></i>\n                              <div data-mdb-input-init className=\"form-outline flex-fill mb-0\">\n                                <input\n                                  type=\"password\"\n                                  id=\"form3Example4c\"\n                                  className=\"form-control\"\n                                  name=\"password\"\n                                  value={formData.password}\n                                  onChange={handleChange}\n                                />\n                                <label className=\"form-label\" htmlFor=\"form3Example4c\">Password</label>\n                              </div>\n                            </div>\n                            <div className=\"d-flex justify-content-center mx-4 mb-3 mb-lg-4\">\n                              <button type=\"submit\" data-mdb-button-init data-mdb-ripple-init className=\"btn btn-primary btn-lg\">Login</button>\n                            </div>\n                          </form>\n                          <LinkContainer to=\"/signup\">\n                            <Nav.Link className=\"navbar-link active\"> <h5>If You are a New User click on here</h5> </Nav.Link>\n                          </LinkContainer>\n                        </div>\n                        <div className=\"col-md-10 col-lg-6 col-xl-7 d-flex align-items-center order-1 order-lg-2\">\n                          <img src=\"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-registration/draw1.webp\" className=\"img-fluid\" alt=\"Sample image\" />\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </section>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default LoginScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}